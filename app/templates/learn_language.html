<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Learn Language</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-keyboard@3.7.106/build/css/index.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  </head>
  <body>
    <main class="container learnContainer">
      <h1>Learn Language</h1>

      <section class="row" aria-label="Status">
        <div class="muted">Time: <span id="timeLeft">30.0</span>s</div>
        <div class="muted">Status: <span id="status">Waiting</span></div>
        <div id="sentenceMeta" class="muted">Loading…</div>
      </section>

      <section id="durationPane" class="row" aria-label="Duration">
        <div class="muted">Duration</div>
        <div class="toggle" role="group" aria-label="Select duration">
          <label class="toggleItem"><input type="radio" name="duration" value="30" checked /> 30s</label>
          <label class="toggleItem"><input type="radio" name="duration" value="60" /> 60s</label>
          <label class="toggleItem"><input type="radio" name="duration" value="90" /> 90s</label>
        </div>
      </section>

      <section class="learnScores" aria-label="Scores">
        <div class="muted learnLastRound">
          Last round:
          <span id="lastCpm" class="value">—</span> wpm ·
          <span id="lastAcc" class="value">—</span> ·
          <span id="lastScore" class="value">—</span> modified wpm
        </div>
        <div class="muted learnHighScoreLine">
          High score:
          <span id="highScore" class="value">—</span> modified wpm
        </div>
      </section>

      <section class="learnCenter" aria-label="Translation and typing">
        <div id="sentenceWrap" class="sentenceWrap" aria-label="Current sentence">
          <div id="englishBox" class="translation learnEnglish" aria-label="English sentence"></div>
          <div id="typingBox" class="typingbox learnSpanish" tabindex="0" role="textbox" aria-multiline="true" aria-label="Type the Spanish sentence shown"></div>
          <div id="timeBar" class="timeBar" role="progressbar" aria-label="Time remaining" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <div id="timeBarFill" class="timeBarFill"></div>
          </div>

          <div id="osk" class="osk" aria-hidden="true"></div>
        </div>
      </section>

      <section class="row actions" aria-label="Actions">
        <button id="newRoundBtn" class="btn" type="button">New round</button>
        <button id="retryBtn" class="btn" type="button" disabled>Retry sentence</button>
      </section>

      <dialog id="resultsDialog">
        <form method="dialog" class="dialog">
          <h2>Results</h2>
          <div id="highScoreBanner" class="muted hidden" aria-live="polite">High Score!</div>
          <div class="dialogGrid">
            <div class="muted">Words/minute</div>
            <div id="cpmValue" class="value">—</div>
            <div class="muted">Accuracy</div>
            <div id="accuracyValue" class="value">—</div>
            <div class="muted">Modified wpm</div>
            <div id="scoreValue" class="value">—</div>
            <div class="muted">Sentences completed</div>
            <div id="sentencesValue" class="value">—</div>
          </div>
          <div class="row dialogActions">
            <button id="dialogNew" class="btn" value="new">New round</button>
          </div>
        </form>
      </dialog>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/simple-keyboard@3.7.106/build/index.js"></script>
    <script src="{{ url_for('static', filename='learn_language.js') }}"></script>
  </body>
</html>
